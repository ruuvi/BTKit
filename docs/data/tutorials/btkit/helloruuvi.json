{"sections":[{"content":[{"inlineContent":[{"type":"text","text":"This tutorial guides you through building "},{"type":"emphasis","inlineContent":[{"text":"HelloRuuvi","type":"text"}]},{"text":" — an app for displaying list of your favorite Bluetooth sensors.","type":"text"}],"type":"paragraph"}],"kind":"hero","estimatedTimeInMinutes":30,"chapter":"Hello Ruuvi!","title":"What's the weather like today?"},{"tasks":[{"title":"Set up Xcode project","contentSection":[{"kind":"contentAndMedia","mediaPosition":"trailing","content":[{"inlineContent":[{"text":"Let’s start with creating an Xcode project.","type":"text"}],"type":"paragraph"}]}],"stepsSection":[{"media":"hello-ruuvi-xcode-0.png","caption":[],"code":null,"content":[{"inlineContent":[{"type":"text","text":"Open Xcode and click on “Create New Project…”, select Multiplatform app, click “Next”, give it a name of "},{"inlineContent":[{"text":"HelloRuuvi","type":"text"}],"type":"emphasis"},{"type":"text","text":", click “Next”, click “Create”."}],"type":"paragraph"}],"type":"step","runtimePreview":null},{"runtimePreview":null,"type":"step","caption":[],"code":null,"media":"hello-ruuvi-xcode-1.png","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You should land on default Xcode project file "},{"type":"codeVoice","code":"ContentView.swift"},{"text":" with a preview of “Hello World!” string.","type":"text"}]}]},{"code":null,"runtimePreview":null,"caption":[],"content":[{"type":"paragraph","inlineContent":[{"text":"Add a Swift Package deppendency on BTKit by clicking ","type":"text"},{"type":"emphasis","inlineContent":[{"text":"HelloRuuvi","type":"text"}]},{"text":" on top left corner, selecting ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"HelloRuuvi"}]},{"type":"text","text":" project and pressing a plus sign on Package Dependencies tab. Enter "},{"type":"codeVoice","code":"https:\/\/github.com\/ruuvi\/BTKit"},{"text":" in Search field at the top right and click on “Add Package”.","type":"text"}]}],"media":"hello-ruuvi-xcode-2.png","type":"step"}],"anchor":"Set-up-Xcode-project"},{"stepsSection":[{"code":null,"type":"step","caption":[],"content":[{"inlineContent":[{"type":"text","text":"Select a "},{"type":"emphasis","inlineContent":[{"text":"HelloRuuvi","type":"text"}]},{"text":" target and navigate to the ","type":"text"},{"code":"Info","type":"codeVoice"},{"type":"text","text":" section. Copy paste "},{"code":"NSBluetoothAlwaysUsageDescription","type":"codeVoice"},{"type":"text","text":" and paste it after right clicking on the list and selecting "},{"type":"codeVoice","code":"Add Row"},{"text":".","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"media":"hello-ruuvi-permissions-0.png"},{"caption":[],"media":"hello-ruuvi-permissions-1.png","type":"step","runtimePreview":null,"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Fill the "},{"code":"NSBluetoothAlwaysUsageDescription","type":"codeVoice"},{"text":" with something like ","type":"text"},{"code":"Bluetooth is used to listen to RuuviTags","type":"codeVoice"},{"text":".","type":"text"}]}]},{"media":"hello-ruuvi-permissions-2.png","code":null,"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In order macOS app to be able to use Bluetooth, navigate to "},{"type":"codeVoice","code":"Signing & Capabilities"},{"text":" tab and add a checkmark for ","type":"text"},{"code":"Bluetooth","type":"codeVoice"},{"type":"text","text":" "},{"code":"App Sandbox","type":"codeVoice"},{"type":"text","text":" Hardware option."}]}],"caption":[],"type":"step"}],"anchor":"Request-necessary-permissions","contentSection":[{"content":[{"inlineContent":[{"text":"Privacy first, we have to request Bluetooth permissions both for iOS and macOS app.","type":"text"}],"type":"paragraph"}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"title":"Request necessary permissions"},{"anchor":"Show-the-weather-conditions","stepsSection":[{"runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Select "},{"type":"codeVoice","code":"ContentView.swift"},{"type":"text","text":" file on the right column."}],"type":"paragraph"}],"caption":[],"code":"ContentView-0.swift","media":null},{"caption":[],"code":"ContentView-1.swift","media":null,"runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Add "},{"type":"codeVoice","code":"import BTKit"},{"type":"text","text":" statement."}],"type":"paragraph"}]},{"type":"step","content":[{"inlineContent":[{"type":"text","text":"Define a "},{"code":"@State","type":"codeVoice"},{"type":"text","text":" variable with a set of RuuviTags."}],"type":"paragraph"}],"media":null,"code":"ContentView-2.swift","runtimePreview":null,"caption":[]},{"code":"ContentView-3.swift","runtimePreview":null,"caption":[],"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Subscribe to the "},{"code":"RuuviTag","type":"codeVoice"},{"type":"text","text":" stream."}]}],"type":"step","media":null},{"caption":[],"type":"step","media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Conform "},{"code":"RuuviTag","type":"codeVoice"},{"text":" to ","type":"text"},{"code":"Identifiable","type":"codeVoice"},{"type":"text","text":"."}]}],"code":"ContentView-4.swift","runtimePreview":null},{"caption":[],"media":null,"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Decide how do you want to sort the "},{"code":"RuuviTags","type":"codeVoice"},{"text":", in this example by RSSI.","type":"text"}],"type":"paragraph"}],"code":"ContentView-5.swift","type":"step"},{"type":"step","caption":[],"media":null,"code":"ContentView-6.swift","content":[{"type":"paragraph","inlineContent":[{"text":"Display the list with simple formatting.","type":"text"}]}],"runtimePreview":null},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Build and run either on macOS or iOS! If you have "},{"code":"RuuviTag","type":"codeVoice"},{"text":" sensors in the range of Bluetooth, you will see the data.","type":"text"},{"type":"text","text":" "},{"text":"But once shown, the data is not being updated… We will address this in the next tutorials.","type":"text"}]}],"type":"step","runtimePreview":null,"caption":[],"code":null,"media":"hello-ruuvi-content-0.png"}],"contentSection":[{"kind":"contentAndMedia","mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"We are ready to display the stream of data on iOS or macOS device."}]}]}],"title":"Show the weather conditions!"}],"kind":"tasks"},{"action":{"isActive":true,"overridingTitle":"Get started","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates","overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"type":"reference"},"title":"Is it... updating?","kind":"callToAction","abstract":[{"text":"In previous tutorial we did a simple app that displays list of RuuviTags. The problem with it is - it doesn’t update… Let’s improve!","type":"text"}],"featuredEyebrow":"Tutorial"}],"kind":"project","identifier":{"interfaceLanguage":"swift","url":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi"},"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"modules":[{"reference":"doc:\/\/BTKit\/tutorials\/MeetBTKit\/Hello-Ruuvi!","projects":[{"reference":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi","sections":[{"kind":"task","reference":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi#Set-up-Xcode-project"},{"kind":"task","reference":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi#Request-necessary-permissions"},{"reference":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi#Show-the-weather-conditions","kind":"task"}]},{"reference":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates","sections":[{"kind":"task","reference":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates#Observable"},{"reference":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates#RuuviTagViewswift-file","kind":"task"},{"kind":"task","reference":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates#RuuviTagView-internals"},{"reference":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates#Back-to-ContentViewswift","kind":"task"}]}]}],"reference":"doc:\/\/BTKit\/tutorials\/MeetBTKit","paths":[["doc:\/\/BTKit\/tutorials\/MeetBTKit","doc:\/\/BTKit\/tutorials\/MeetBTKit\/$volume","doc:\/\/BTKit\/tutorials\/MeetBTKit\/Hello-Ruuvi!"],["doc:\/\/BTKit\/documentation\/BTKit"]]},"metadata":{"categoryPathComponent":"MeetBTKit","category":"BTKit","role":"project","title":"What's the weather like today?"},"variants":[{"paths":["\/tutorials\/btkit\/helloruuvi"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"ContentView-3.swift":{"highlights":[{"line":10},{"line":11},{"line":12}],"syntax":"swift","identifier":"ContentView-3.swift","fileType":"swift","type":"file","content":["import BTKit","import SwiftUI","","struct ContentView: View {","    @State var content: Set<RuuviTag> = []","","    var body: some View {","        VStack {","        }","        .onReceive(BTForeground.publisher.ruuviTag) {","            content.update(with: $0)","        }","    }","}"],"fileName":"ContentView.swift"},"ContentView-1.swift":{"fileType":"swift","highlights":[{"line":1}],"fileName":"ContentView.swift","type":"file","syntax":"swift","content":["import BTKit","import SwiftUI","","struct ContentView: View {","    var body: some View {","        VStack {","        }","    }","}"],"identifier":"ContentView-1.swift"},"ContentView-4.swift":{"highlights":[{"line":15},{"line":16},{"line":17},{"line":18}],"identifier":"ContentView-4.swift","content":["import BTKit","import SwiftUI","","struct ContentView: View {","    @State var content: Set<RuuviTag> = []","","    var body: some View {","        VStack {","        }","        .onReceive(BTForeground.publisher.ruuviTag) {","            content.update(with: $0)","        }","    }","}","","extension RuuviTag: Identifiable {","    public var id: String { uuid }","}"],"fileName":"ContentView.swift","fileType":"swift","syntax":"swift","type":"file"},"ContentView-6.swift":{"fileType":"swift","highlights":[{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32}],"fileName":"ContentView.swift","type":"file","syntax":"swift","content":["import BTKit","import SwiftUI","","struct ContentView: View {","    @State var content: Set<RuuviTag> = []","","    var body: some View {","        VStack {","            List(content.sorted(by: >)) { ruuviTag in","                Text(ruuviTag.mac ?? ruuviTag.uuid)","                    .font(.title2)","                    .bold()","","                if let temperature = ruuviTag.celsius {","                    HStack {","                        Image(systemName: \"thermometer\")","                        Text(\"\\(temperature, specifier: \"%.1f\")°C\")","                    }","                }","                if let humidity = ruuviTag.relativeHumidity {","                    HStack {","                        Image(systemName: \"humidity\")","                        Text(\"\\(humidity, specifier: \"%.1f\")%\")","                    }","                }","                if let pressure = ruuviTag.hectopascals {","                    HStack {","                        Image(systemName: \"barometer\")","                        Text(\"\\(pressure, specifier: \"%.1f\") hPa\")","                    }","                }","            }","        }","        .onReceive(BTForeground.publisher.ruuviTag) {","            content.update(with: $0)","        }","    }","}","","extension RuuviTag: Identifiable {","    public var id: String { uuid }","}","","extension RuuviTag: Comparable {","    public static func < (lhs: RuuviTag, rhs: RuuviTag) -> Bool {","        lhs.rssi ?? 0 < rhs.rssi ?? 0","    }","}"],"identifier":"ContentView-6.swift"},"hello-ruuvi-xcode-2.png":{"identifier":"hello-ruuvi-xcode-2.png","alt":"Add BTKit","variants":[{"traits":["1x","light"],"url":"\/images\/hello-ruuvi-xcode-2.png"}],"type":"image"},"doc://BTKit/tutorials/BTKit/RuuviUpdates#Back-to-ContentViewswift":{"role":"pseudoSymbol","abstract":[{"text":"In previous tutorial we did a simple app that displays list of RuuviTags. The problem with it is - it doesn’t update… Let’s improve!","type":"text"}],"url":"\/tutorials\/btkit\/ruuviupdates#Back-to-ContentViewswift","type":"section","kind":"section","title":"Back to ContentView.swift","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates#Back-to-ContentViewswift"},"doc://BTKit/tutorials/BTKit/HelloRuuvi":{"role":"project","estimatedTime":"30min","abstract":[{"text":"This tutorial guides you through building ","type":"text"},{"type":"emphasis","inlineContent":[{"text":"HelloRuuvi","type":"text"}]},{"text":" — an app for displaying list of your favorite Bluetooth sensors.","type":"text"}],"url":"\/tutorials\/btkit\/helloruuvi","type":"topic","kind":"project","title":"What's the weather like today?","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi"},"doc://BTKit/tutorials/BTKit/RuuviUpdates#Observable":{"role":"pseudoSymbol","abstract":[{"text":"In previous tutorial we did a simple app that displays list of RuuviTags. The problem with it is - it doesn’t update… Let’s improve!","type":"text"}],"url":"\/tutorials\/btkit\/ruuviupdates#Observable","type":"section","kind":"section","title":"Observable","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates#Observable"},"doc://BTKit/tutorials/BTKit/RuuviUpdates":{"role":"project","estimatedTime":"45min","abstract":[{"text":"In previous tutorial we did a simple app that displays list of RuuviTags. The problem with it is - it doesn’t update… Let’s improve!","type":"text"}],"url":"\/tutorials\/btkit\/ruuviupdates","type":"topic","kind":"project","title":"Is it... updating?","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates"},"doc://BTKit/tutorials/BTKit/RuuviUpdates#RuuviTagView-internals":{"role":"pseudoSymbol","abstract":[{"text":"In previous tutorial we did a simple app that displays list of RuuviTags. The problem with it is - it doesn’t update… Let’s improve!","type":"text"}],"url":"\/tutorials\/btkit\/ruuviupdates#RuuviTagView-internals","type":"section","kind":"section","title":"RuuviTagView internals","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates#RuuviTagView-internals"},"hello-ruuvi-permissions-2.png":{"identifier":"hello-ruuvi-permissions-2.png","alt":"Add BTKit","variants":[{"url":"\/images\/hello-ruuvi-permissions-2.png","traits":["1x","light"]}],"type":"image"},"hello-ruuvi-permissions-1.png":{"alt":"Fill Bluetooth description","identifier":"hello-ruuvi-permissions-1.png","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/hello-ruuvi-permissions-1.png"}]},"doc://BTKit/tutorials/BTKit/RuuviUpdates#RuuviTagViewswift-file":{"role":"pseudoSymbol","abstract":[{"text":"In previous tutorial we did a simple app that displays list of RuuviTags. The problem with it is - it doesn’t update… Let’s improve!","type":"text"}],"url":"\/tutorials\/btkit\/ruuviupdates#RuuviTagViewswift-file","type":"section","kind":"section","title":"RuuviTagView.swift file","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/RuuviUpdates#RuuviTagViewswift-file"},"hello-ruuvi-permissions-0.png":{"alt":"Request Bluetooth permission","identifier":"hello-ruuvi-permissions-0.png","type":"image","variants":[{"url":"\/images\/hello-ruuvi-permissions-0.png","traits":["1x","light"]}]},"ContentView-2.swift":{"fileType":"swift","highlights":[{"line":5},{"line":6}],"fileName":"ContentView.swift","syntax":"swift","type":"file","content":["import BTKit","import SwiftUI","","struct ContentView: View {","    @State var content: Set<RuuviTag> = []","","    var body: some View {","        VStack {","        }","    }","}"],"identifier":"ContentView-2.swift"},"hello-ruuvi-xcode-0.png":{"alt":"Multiplatform project type selction on Xcode","identifier":"hello-ruuvi-xcode-0.png","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/hello-ruuvi-xcode-0.png"}]},"doc://BTKit/tutorials/MeetBTKit":{"role":"overview","abstract":[{"text":"A library for building applications to listen and interact with Ruuvi devices.","type":"text"}],"url":"\/tutorials\/meetbtkit","type":"topic","kind":"overview","title":"Meet the BTKit","identifier":"doc:\/\/BTKit\/tutorials\/MeetBTKit"},"ContentView-5.swift":{"fileType":"swift","highlights":[{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24}],"fileName":"ContentView.swift","type":"file","syntax":"swift","content":["import BTKit","import SwiftUI","","struct ContentView: View {","    @State var content: Set<RuuviTag> = []","","    var body: some View {","        VStack {","        }","        .onReceive(BTForeground.publisher.ruuviTag) {","            content.update(with: $0)","        }","    }","}","","extension RuuviTag: Identifiable {","    public var id: String { uuid }","}","","extension RuuviTag: Comparable {","    public static func < (lhs: RuuviTag, rhs: RuuviTag) -> Bool {","        lhs.rssi ?? 0 < rhs.rssi ?? 0","    }","}"],"identifier":"ContentView-5.swift"},"hello-ruuvi-content-0.png":{"identifier":"hello-ruuvi-content-0.png","alt":"Final app","variants":[{"url":"\/images\/hello-ruuvi-content-0.png","traits":["1x","light"]}],"type":"image"},"doc://BTKit/tutorials/BTKit/HelloRuuvi#Request-necessary-permissions":{"role":"pseudoSymbol","abstract":[{"text":"This tutorial guides you through building ","type":"text"},{"inlineContent":[{"type":"text","text":"HelloRuuvi"}],"type":"emphasis"},{"text":" — an app for displaying list of your favorite Bluetooth sensors.","type":"text"}],"url":"\/tutorials\/btkit\/helloruuvi#Request-necessary-permissions","type":"section","kind":"section","title":"Request necessary permissions","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi#Request-necessary-permissions"},"doc://BTKit/tutorials/BTKit/HelloRuuvi#Show-the-weather-conditions":{"role":"pseudoSymbol","abstract":[{"text":"This tutorial guides you through building ","type":"text"},{"type":"emphasis","inlineContent":[{"text":"HelloRuuvi","type":"text"}]},{"text":" — an app for displaying list of your favorite Bluetooth sensors.","type":"text"}],"url":"\/tutorials\/btkit\/helloruuvi#Show-the-weather-conditions","type":"section","kind":"section","title":"Show the weather conditions!","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi#Show-the-weather-conditions"},"doc://BTKit/tutorials/MeetBTKit/Hello-Ruuvi!":{"role":"article","abstract":[],"url":"\/tutorials\/meetbtkit\/hello-ruuvi!","type":"topic","kind":"article","title":"Hello Ruuvi!","identifier":"doc:\/\/BTKit\/tutorials\/MeetBTKit\/Hello-Ruuvi!"},"hello-ruuvi-xcode-1.png":{"identifier":"hello-ruuvi-xcode-1.png","alt":"Default Xcode project","variants":[{"url":"\/images\/hello-ruuvi-xcode-1.png","traits":["1x","light"]}],"type":"image"},"doc://BTKit/tutorials/BTKit/HelloRuuvi#Set-up-Xcode-project":{"role":"pseudoSymbol","abstract":[{"type":"text","text":"This tutorial guides you through building "},{"inlineContent":[{"text":"HelloRuuvi","type":"text"}],"type":"emphasis"},{"text":" — an app for displaying list of your favorite Bluetooth sensors.","type":"text"}],"url":"\/tutorials\/btkit\/helloruuvi#Set-up-Xcode-project","type":"section","kind":"section","title":"Set up Xcode project","identifier":"doc:\/\/BTKit\/tutorials\/BTKit\/HelloRuuvi#Set-up-Xcode-project"},"ContentView-0.swift":{"fileType":"swift","highlights":[],"fileName":"ContentView.swift","syntax":"swift","type":"file","content":["import SwiftUI","","struct ContentView: View {","    var body: some View {","        VStack {","        }","    }","}"],"identifier":"ContentView-0.swift"}}}